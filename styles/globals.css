@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Single source of truth for the neon accent — matches tailwind.config.js */
    --neon: 255 49 49;
  }

  ::selection {
    background-color: rgb(var(--neon) / 0.2);
    color: #f0f0f0;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ── Neon glow ────────────────────────────────── */

.neon-text {
  color: rgb(var(--neon));
  text-shadow:
    0 0 7px rgb(var(--neon) / 0.4),
    0 0 20px rgb(var(--neon) / 0.2),
    0 0 42px rgb(var(--neon) / 0.1);
}

.neon-line {
  height: 1px;
  background: linear-gradient(90deg, rgb(var(--neon)), transparent);
  opacity: 0.5;
}

/* ── Animations ───────────────────────────────── */

@keyframes pulse-line {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-pulse-line {
  animation: pulse-line 3s ease-in-out infinite;
}

/* ── Neon flicker ─────────────────────────────── */

@keyframes neon-flicker {
  0%,
  100% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
  4% {
    opacity: 0.9;
    filter:
      drop-shadow(0 0 4px rgb(var(--neon) / 0.4))
      drop-shadow(0 0 16px rgb(var(--neon) / 0.2));
  }
  6% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
  41% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
  43% {
    opacity: 0.85;
    filter:
      drop-shadow(0 0 3px rgb(var(--neon) / 0.3))
      drop-shadow(0 0 12px rgb(var(--neon) / 0.12));
  }
  45% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
  74% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
  76% {
    opacity: 0.92;
    filter:
      drop-shadow(0 0 5px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 20px rgb(var(--neon) / 0.25));
  }
  77% {
    opacity: 0.8;
    filter:
      drop-shadow(0 0 3px rgb(var(--neon) / 0.2))
      drop-shadow(0 0 10px rgb(var(--neon) / 0.08));
  }
  79% {
    opacity: 1;
    filter:
      drop-shadow(0 0 8px rgb(var(--neon) / 0.8))
      drop-shadow(0 0 30px rgb(var(--neon) / 0.5))
      drop-shadow(0 0 60px rgb(var(--neon) / 0.25));
  }
}

.neon-flicker-glow {
  animation: neon-flicker 4s ease-in-out infinite;
}

/* ── Per-letter neon effects ─────────────────── */

.neon-letter {
  transition: opacity 0.1s, filter 0.1s;
}

/* Quick flicker — the tube buzzes for a split second */
@keyframes letter-flicker {
  0% {
    opacity: 1;
  }
  15% {
    opacity: 0.3;
  }
  30% {
    opacity: 0.8;
  }
  50% {
    opacity: 0.15;
  }
  70% {
    opacity: 0.7;
  }
  85% {
    opacity: 0.25;
  }
  100% {
    opacity: 1;
  }
}

.neon-letter-flicker {
  animation: letter-flicker 0.15s steps(1, end);
}

/* Full "go dark" — tube loses power and slowly relights */
@keyframes letter-out {
  0% {
    opacity: 1;
    filter: brightness(1);
  }
  8% {
    opacity: 0.15;
    filter: brightness(0.3);
  }
  12% {
    opacity: 0.3;
    filter: brightness(0.5);
  }
  18% {
    opacity: 0.08;
    filter: brightness(0.15);
  }
  60% {
    opacity: 0.05;
    filter: brightness(0.1);
  }
  75% {
    opacity: 0.35;
    filter: brightness(0.5);
  }
  82% {
    opacity: 0.12;
    filter: brightness(0.2);
  }
  92% {
    opacity: 0.6;
    filter: brightness(0.7);
  }
  100% {
    opacity: 1;
    filter: brightness(1);
  }
}

.neon-letter-out {
  animation: letter-out 0.9s ease-out;
}
